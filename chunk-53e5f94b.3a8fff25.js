(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-53e5f94b"],{"0d7f":function(t,e,s){},1860:function(t,e,s){},"1b2a":function(t,e,s){},"4fc4":function(t,e,s){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"main-container"},[e("div",{staticClass:"main-content"},[t._t("default")],2)])},i=[],n={name:"PageBody"},o=n,r=(s("8d80"),s("2877")),c=Object(r["a"])(o,a,i,!1,null,"37fb9066",null);e["a"]=c.exports},"6e70":function(t,e,s){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"header"},[e("div",{staticClass:"header-container"},[e("div",{staticClass:"app-name"},[e("router-link",{attrs:{to:"/"}},[e("img",{staticStyle:{width:"36px",position:"relative",top:"5px","border-radius":"50%"},attrs:{src:s("cf05")}}),e("b",[t._v("임박 할인 식품")])])],1),e("div",{staticClass:"nav-actions"},[e("router-link",{staticClass:"nav-icon",attrs:{to:"/release"}},[e("i",{staticClass:"el-icon-plus"})]),e("router-link",{staticClass:"nav-icon",attrs:{to:"/message"}},[e("i",{staticClass:"el-icon-bell"})]),t.isLogin?e("el-dropdown",{attrs:{trigger:"click"}},[e("div",{staticClass:"user-profile"},[e("el-avatar",{attrs:{size:32,src:t.avatarValue?t.avatarValue:t.avatar}})],1),e("el-dropdown-menu",{staticClass:"dropdown-menu",attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",[e("div",{staticClass:"dropdown-item",on:{click:t.toMe}},[t._v("마이페이지")])]),e("el-dropdown-item",{staticClass:"logout-item",attrs:{divided:""}},[e("div",{on:{click:t.loginOut}},[t._v("로그아웃")])])],1)],1):e("router-link",{staticClass:"nav-icon user-icon",attrs:{to:"/login"}},[e("i",{staticClass:"el-icon-user"})])],1)])])},i=[],n=(s("a481"),{name:"Header",props:["searchInput","nicknameValue","avatarValue"],data:function(){return{searchValue:this.searchInput,nickname:"로그인",avatar:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png",isLogin:!1}},created:function(){var t=this;this.$globalData.userInfo.nickname?(this.nickname=this.$globalData.userInfo.nickname,this.avatar=this.$globalData.userInfo.avatar,this.isLogin=!0):this.$api.getUserInfo().then((function(e){console.log("Header getUserInfo:",e),1===e.status_code&&(t.nickname=e.data.nickname,t.avatar=e.data.avatar,e.data.signInTime=e.data.signInTime.substring(0,10),t.$globalData.userInfo=e.data,t.isLogin=!0)}))},methods:{searchIdle:function(){"/search"!==this.$route.path?this.$router.push({path:"/search",query:{searchValue:this.searchValue}}):(this.$router.replace({path:"/search",query:{searchValue:this.searchValue}}),this.$router.go(0))},toMe:function(){"/me"!==this.$route.path&&this.$router.push({path:"/me"})},toMessage:function(){"/message"!==this.$route.path&&this.$router.push({path:"/message"})},toRelease:function(){"/release"!==this.$route.path&&this.$router.push({path:"/release"})},loginOut:function(){var t=this;this.$api.logout().then((function(e){1===e.status_code?(t.$globalData.userInfo={},console.log("login out"),"/index"===t.$route.path?t.$router.go(0):t.$router.push({path:"/index"})):t.$message.error("네트워크 오류. 로그아웃 실패!")}))}}}),o=n,r=(s("7154"),s("2877")),c=Object(r["a"])(o,a,i,!1,null,"1d9eff64",null);e["a"]=c.exports},7154:function(t,e,s){"use strict";s("dabf")},"72a3":function(t,e,s){"use strict";s("1b2a")},8587:function(t,e,s){"use strict";s("0d7f")},"85a9":function(t,e,s){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"foot-container"},[e("div",{staticClass:"nav-container"},[e("router-link",{staticClass:"nav-item",class:{active:t.isActivePage("/index")},attrs:{to:"/index"}},[e("i",{staticClass:"el-icon-s-home"}),e("span",[t._v("홈")])]),e("router-link",{staticClass:"nav-item",class:{active:t.isActivePage("/search")},attrs:{to:"/search"}},[e("i",{staticClass:"el-icon-search"}),e("span",[t._v("검색")])]),e("router-link",{staticClass:"nav-item",class:{active:t.isActivePage("/release")},attrs:{to:"/release"}},[e("i",{staticClass:"el-icon-plus"}),e("span",[t._v("등록")])]),e("router-link",{staticClass:"nav-item",class:{active:t.isActivePage("/message")},attrs:{to:"/message"}},[e("i",{staticClass:"el-icon-bell"}),e("span",[t._v("메시지")])]),e("router-link",{staticClass:"nav-item",class:{active:t.isActivePage("/me")},attrs:{to:"/me"}},[e("i",{staticClass:"el-icon-user"}),e("span",[t._v("마이")])])],1)])},i=[],n={name:"Foot",methods:{isActivePage:function(t){return this.$route.path===t}}},o=n,r=(s("72a3"),s("2877")),c=Object(r["a"])(o,a,i,!1,null,"2c5dd8f7",null);e["a"]=c.exports},"8d80":function(t,e,s){"use strict";s("1860")},a23a:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("app-head"),e("app-body",[e("div",{staticClass:"main-content"},[e("div",{staticClass:"product-detail-card"},[e("div",{staticClass:"seller-info"},[e("div",{staticClass:"seller-profile"},[e("el-image",{staticClass:"seller-avatar",attrs:{src:t.idleItemInfo.user.avatar,fit:"cover"}}),e("div",{staticClass:"seller-data"},[e("div",{staticClass:"seller-name"},[t._v(t._s(t.idleItemInfo.user.nickname))]),e("div",{staticClass:"seller-join-date"},[t._v(t._s(t.idleItemInfo.user.signInTime.substring(0,10))+" 가입")])])],1),e("div",{staticClass:"product-actions"},[e("div",{staticClass:"product-price"},[t._v("₩"+t._s(t.idleItemInfo.idlePrice))]),t.isMaster||1===t.idleItemInfo.idleStatus?t._e():e("div",{staticClass:"product-status"},[t._v("판매 종료된 상품입니다")]),e("div",{staticClass:"action-buttons"},[t.isMaster||1!==t.idleItemInfo.idleStatus?t._e():e("el-button",{attrs:{type:"danger",round:""},on:{click:function(e){return t.buyButton(t.idleItemInfo)}}},[t._v("바로 구매")]),t.isMaster||1!==t.idleItemInfo.idleStatus?t._e():e("el-button",{attrs:{type:"warning",round:""},on:{click:function(e){return t.favoriteButton(t.idleItemInfo)}}},[t._v(t._s(t.isFavorite?"찜 취소":"찜하기"))]),t.isMaster&&1===t.idleItemInfo.idleStatus?e("el-button",{attrs:{type:"danger",round:""},on:{click:function(e){return t.changeStatus(t.idleItemInfo,2)}}},[t._v("판매 종료")]):t._e(),t.isMaster&&2===t.idleItemInfo.idleStatus?e("el-button",{attrs:{type:"success",round:""},on:{click:function(e){return t.changeStatus(t.idleItemInfo,1)}}},[t._v("재판매")]):t._e()],1)])]),e("div",{staticClass:"product-info"},[e("h1",{staticClass:"product-title"},[t._v(t._s(t.idleItemInfo.idleName))]),e("div",{staticClass:"product-description",domProps:{innerHTML:t._s(t.idleItemInfo.idleDetails)}}),e("div",{staticClass:"product-images"},t._l(t.idleItemInfo.pictureList,(function(t,s){return e("div",{key:s,staticClass:"image-wrapper"},[e("el-image",{staticClass:"product-image",attrs:{src:t,fit:"cover"}})],1)})),0)])]),e("div",{staticClass:"comments-section",attrs:{id:"replyMessageLocation"}},[e("h2",{staticClass:"section-title"},[t._v("댓글")]),e("div",{staticClass:"comment-form"},[t.isReply?e("div",{staticClass:"reply-info"},[e("el-button",{attrs:{type:"info",size:"small"},on:{click:t.cancelReply}},[t._v("\n                            "+t._s(t.replyData.toUserNickname)+"님에게 답글: "+t._s(t.replyData.toMessage)+"\n                            "),e("i",{staticClass:"el-icon-close el-icon--right"})])],1):t._e(),e("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"댓글을 입력하세요...",maxlength:"200","show-word-limit":""},model:{value:t.messageContent,callback:function(e){t.messageContent=e},expression:"messageContent"}}),e("div",{staticClass:"comment-button"},[e("el-button",{attrs:{type:"success",round:""},on:{click:t.sendMessage}},[t._v("댓글 등록")])],1)],1),e("div",{staticClass:"comments-list"},t._l(t.messageList,(function(s,a){return e("div",{key:a,staticClass:"comment-item"},[e("div",{staticClass:"comment-user"},[e("el-image",{staticClass:"commenter-avatar",attrs:{src:s.fromU.avatar,fit:"cover"}}),e("div",{staticClass:"comment-content"},[e("div",{staticClass:"commenter-name"},[t._v("\n                                    "+t._s(s.fromU.nickname)+"\n                                    "),s.toU.nickname?e("span",{staticClass:"reply-reference"},[t._v("\n                                        @"+t._s(s.toU.nickname)+": "+t._s(s.toM.content.substring(0,10))+t._s(s.toM.content.length>10?"...":"")+"\n                                    ")]):t._e()]),e("div",{staticClass:"comment-text",domProps:{innerHTML:t._s(s.content)}}),e("div",{staticClass:"comment-time"},[t._v(t._s(s.createTime))])])],1),e("div",{staticClass:"comment-actions"},[e("el-button",{attrs:{size:"small",type:"text"},on:{click:function(e){return t.replyMessage(a)}}},[t._v("답글")])],1)])})),0)])]),e("app-foot"),e("div",{staticStyle:{height:"100px"}})],1)],1)},i=[],n=s("f2cd"),o=n["a"],r=(s("8587"),s("2877")),c=Object(r["a"])(o,a,i,!1,null,"41da2a58",null);e["default"]=c.exports},cf05:function(t,e,s){t.exports=s.p+"static/img/logo.2286f000.png"},dabf:function(t,e,s){},f2cd:function(t,e,s){"use strict";(function(t){s("28a5");var a=s("6e70"),i=s("4fc4"),n=s("85a9");e["a"]={name:"idle-details",components:{AppHead:a["a"],AppBody:i["a"],AppFoot:n["a"]},data:function(){return{messageContent:"",toUser:null,toMessage:null,isReply:!1,replyData:{toUserNickname:"",toMessage:""},messageList:[],idleItemInfo:{id:"",idleName:"",idleDetails:"",pictureList:[],idlePrice:0,idlePlace:"",idleLabel:"",idleStatus:-1,userId:"",user:{avatar:"",nickname:"",signInTime:""}},isMaster:!1,isFavorite:!0,favoriteId:0}},created:function(){var e=this,s=this.$route.query.id;this.$api.getIdleItem({id:s}).then((function(s){if(console.log(s),s.data){for(var a=s.data.idleDetails.split(/\r?\n/),i="",n=0;n<a.length;n++)i+="<p>"+a[n]+"</p>";s.data.idleDetails=i,s.data.pictureList=JSON.parse(s.data.pictureList),e.idleItemInfo=s.data,console.log(e.idleItemInfo);var o=e.getCookie("shUserId");console.log("userid",o),o==e.idleItemInfo.userId&&(console.log("isMaster"),e.isMaster=!0),e.checkFavorite(),e.getAllIdleMessage()}t("html,body").animate({scrollTop:0},{duration:500,easing:"swing"})}))},methods:{getAllIdleMessage:function(){var t=this;this.$api.getAllIdleMessage({idleId:this.idleItemInfo.id}).then((function(e){console.log("getAllIdleMessage",e.data),1===e.status_code&&(t.messageList=e.data)})).catch((function(){}))},checkFavorite:function(){var t=this;this.$api.checkFavorite({idleId:this.idleItemInfo.id}).then((function(e){e.data?t.favoriteId=e.data:t.isFavorite=!1}))},getCookie:function(t){for(var e=t+"=",s=document.cookie.split(";"),a=0;a<s.length;a++){var i=s[a].trim();if(0===i.indexOf(e))return i.substring(e.length,i.length)}return""},replyMessage:function(e){t("html,body").animate({scrollTop:t("#replyMessageLocation").offset().top-600},{duration:500,easing:"swing"}),this.isReply=!0,this.replyData.toUserNickname=this.messageList[e].fromU.nickname,this.replyData.toMessage=this.messageList[e].content.substring(0,10)+(this.messageList[e].content.length>10?"...":""),this.toUser=this.messageList[e].userId,this.toMessage=this.messageList[e].id},changeStatus:function(t,e){var s=this;this.$api.updateIdleItem({id:t.id,idleStatus:e}).then((function(t){console.log(t),1===t.status_code?s.idleItemInfo.idleStatus=e:s.$message.error(t.msg)}))},buyButton:function(t){var e=this;this.$api.addOrder({idleId:t.id,orderPrice:t.idlePrice}).then((function(t){console.log(t),1===t.status_code?e.$router.push({path:"/order",query:{id:t.data.id}}):e.$message.error(t.msg)})).catch((function(t){}))},favoriteButton:function(t){var e=this;this.isFavorite?this.$api.deleteFavorite({id:this.favoriteId}).then((function(t){console.log(t),1===t.status_code?(e.$message({message:"已取消收藏！",type:"success"}),e.isFavorite=!1):e.$message.error(t.msg)})).catch((function(t){})):this.$api.addFavorite({idleId:t.id}).then((function(t){console.log(t),1===t.status_code?(e.$message({message:"已收藏！",type:"success"}),e.isFavorite=!0,e.favoriteId=t.data):e.$message.error(t.msg)})).catch((function(t){}))},cancelReply:function(){this.isReply=!1,this.toUser=this.idleItemInfo.userId,this.toMessage=null,this.replyData.toUserNickname="",this.replyData.toMessage=""},sendMessage:function(){var t=this,e=this.messageContent.trim();if(null==this.toUser&&(this.toUser=this.idleItemInfo.userId),e){for(var s=e.split(/\r?\n/),a=s[0],i=1;i<s.length;i++)a+="<br>"+s[i];this.$api.sendMessage({idleId:this.idleItemInfo.id,content:a,toUser:this.toUser,toMessage:this.toMessage}).then((function(e){1===e.status_code?(t.$message({message:"留言成功！",type:"success"}),t.messageContent="",t.cancelReply(),t.getAllIdleMessage()):t.$message.error("留言失败！"+e.msg)})).catch((function(){t.$message.error("留言失败！")}))}else this.$message.error("留言为空！")}}}}).call(this,s("1157"))}}]);